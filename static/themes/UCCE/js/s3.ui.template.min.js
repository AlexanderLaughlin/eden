var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var l=0;return function(){return l<a.length?{done:!1,value:a[l++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,e){a!=Array.prototype&&a!=Object.prototype&&(a[l]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,l){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:l})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(e||"")+"_"+l++,e)}var l=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,l){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,h={next:function(){if(e<a.length){var A=e++;return{value:l(A,a[A]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(a,l,e,h){if(l){e=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var A=a[h];A in e||(e[A]={});e=e[A]}a=a[a.length-1];h=e[a];l=l(h);l!=h&&null!=l&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(a){a(window.jQuery,window.loadImage)})(function(a,l){var e=0,h=[],A={1:["Strongly Disagree","Disagree","Undecided","Agree","Strongly Agree"],2:["Very unsatisfied","Unsatisfied","Neutral","Satisfied","Very satisfied"],3:["Very dissatisfied","Dissatisfied","Neutral","Satisfied","Very satisfied"],4:["Pain","Neutral","No Pain"]},B={},q={},C={},N={text:1,number:2,multichoice:6,likert:12,heatmap:13},H={1:"text",2:"number",6:"multichoice",12:"likert",13:"heatmap"};a.widget("s3.surveyLayout",{options:{},
_create:function(){this.id=e;e+=1;this.eventNamespace=".surveyEditor"},_init:function(){var d=a(this.element),c=d.attr("id");c||(c="surveyEditor-widget-"+this.id);this.fieldname=c;this.recordID=d.data("id");this.data=null;this.ajaxMethod=void 0!==a.searchS3?a.searchS3:a.ajaxS3;a.validator.addMethod("lessThanMax",function(c,b){var d=b.id.split("-")[1];d=a("#max-"+d).val();return this.optional(b)||parseFloat(c)<=d},"needs to be lower than Maximum");a.validator.addMethod("greaterThanMin",function(c,
b){var d=b.id.split("-")[1];d=a("#min-"+d).val();return this.optional(b)||parseFloat(c)>=d},"needs to be higher than Minimum");this.refresh()},addQuestion:function(a,c,g,b){if("instructions"==g)b?this._addQuestion(a,c,g,null,!0):this._addQuestion(a,c,g);else if(b)this._addQuestion(a,c,g,b,!0);else{var d=this;b=S3.Ap.concat("/dc/question/create_json.json");var f=JSON.stringify({type:N[g],template_id:this.recordID});this.ajaxMethod({url:b,type:"POST",data:f,dataType:"json",success:function(b){d._addQuestion(a,
c,g,b.question_id)},error:function(a,b,c){console.log("UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText)}})}},_addQuestion:function(d,c,g,b,k){if(k)for(var f=1,m=Object.keys(C).length;f<m;f++){if(d==C[f]){var x=f;break}}else"instructions"==g?this.data.layout[d]={type:"instructions",do:{text:""},say:{text:""}}:(x=Object.keys(C).length+1,C[x]=d,this.data.layout[d]={type:"question",id:b}),this.save();if("instructions"==g)var r='<div class="thumbnail dl-item" id="instruction-'+d+'" data-page="'+
c+'"><div class="card-header"><div class="fleft">Edit</div> <div class="fleft">Display Logic</div> <div class="fleft">Translation</div> <div class="edit-bar fright"><a><i class="ucce\tucce-duplicate"> </i></a><a><i class="ucce ucce-delete"> </i></a><i class="ucce ucce-up"> </i><i class="ucce ucce-down"> </i></div></div>';else{var p=this.data.questions[b];r='<div class="thumbnail dl-item" id="question-'+b+'" data-page="'+c+'" data-number="'+x+'"><div class="card-header"><div class="fleft">Edit</div> <div class="fleft">Display Logic</div> <div class="fleft">Translation</div> <div class="edit-bar fright"><a><i class="ucce\tucce-duplicate"> </i></a><a><i class="ucce ucce-delete"> </i></a><i class="ucce ucce-up"> </i><i class="ucce ucce-down"> </i></div></div>';
var e="";k&&p.mandatory&&(e=" checked");e='<div class="row"><input id="mandatory-'+b+'" type="checkbox" '+e+' class="fleft"><label>Make question mandatory</label></div>';if("heatmap"!=g){var y="";if(k)var G=p.settings.pipeImage;for(z in h)y=G&&G.id==z.id&&G.region==z.region?y+("<option selected>"+z.label+"</option>"):y+("<option>"+z.label+"</option>");y='<div class="row"><label>Add graphic</label><span id="preview-'+b+'" class="preview-empty fleft"></span><label for="image-'+b+'" class="button tiny fleft">Upload image</label><input id="image-'+
b+'" name="file" type="file" accept="image/png, image/jpeg" class="show-for-sr"><label class="fleft">or pipe question image:</label><select class="fleft"><option value="">select question</option>'+y+'</select><a id="image-delete-'+b+'">Delete</a></div>'}}switch(g){case "instructions":e=x="";k&&(x=this.data.layout[d].do.text,e=this.data.layout[d].say.text);var t='<div class="media"><h2>Data collector instructions</h2><label>What to do</label><input id="do-'+d+'" type="text" size=100 placeholder="Type what instructor should do" value="'+
x+'"><label>What to say</label><input id="say-'+d+'" type="text" size=100 placeholder="Type what instructor should say" value="'+e+'"></div>';var F="#instruction-"+d+" input";var n="#instruction-"+d+" .ucce-delete";break;case "text":n="";k&&(n=p.name);t='<div class="media"><h2>Text box</h2><div class="row"><label id="qlabel-'+b+'" class="fleft">Q'+x+'</label><input id="name-'+b+'" type="text" size=100 placeholder="type question" value="'+n+'"></div>'+e+y;F="#question-"+b+" input, #question-"+b+" select";
n="#question-"+b+" .ucce-delete";break;case "number":t=m=n="";k&&(n=p.name,f=p.settings||{},f=(f.requires||{}).isIntInRange)&&(m=f.min||"",t=f.max||"");t='<div class="media"><h2>Number question</h2><div class="row"><label id="qlabel-'+b+'" class="fleft">Q'+x+'</label><input id="name-'+b+'"type="text" size=100 placeholder="type question" value="'+n+'"></div>'+e+y+('<div class="row"><h2>Answer</h2><form id="answer-'+b+'"><label>Minimum:</label><input id="min-'+b+'" name="min" type="number" value="'+
m+'"><label>Maximum:</label><input id="max-'+b+'" name="max" type="number" value="'+t+'"></form></div>');F="#question-"+b+" input, #question-"+b+" select";n="#question-"+b+" .ucce-delete";break;case "multichoice":var I='<div class="row"><input class="choice-'+b+'" type="text" placeholder="Enter an answer choice"><i class="ucce ucce-minus"> </i><i class="ucce ucce-plus"> </i></div>';n="";m=I;t="";var z=" disabled";var D="";f=1;var J="";if(k){n=p.name;D=p.options||[];var K=D.length;if(K)for(m="",f=
0;f<K;f++)m+='<div class="row"><input class="choice-'+b+'" type="text" placeholder="Enter an answer choice" value="'+D[f]+'"><i class="ucce ucce-minus"> </i><i class="ucce ucce-plus"> </i></div>';f=p.settings;if(D=f.other||"")t=" checked",z="";f=f.multiple||1;1<f&&(J=" checked")}t='<div class="media"><h2>Multiple choice question</h2><div class="row"><label id="qlabel-'+b+'" class="fleft">Q'+x+'</label><input id="name-'+b+'"type="text" size=100 placeholder="type question" value="'+n+'"></div>'+e+y+
('<div class="row"><h2>Answer</h2><label>Choices</label></div>'+m+'<div class="row"><input id="other-'+b+'" type="checkbox"'+t+'><label>Add \'other field\'</label></div><div class="row"><label class="fleft">Field label</label><input id="other-label-'+b+'" type="text" placeholder="Other (please specify)" value="'+D+'"'+z+'></div><div class="row"><input id="multiple-'+b+'" type="checkbox"'+J+'><label>Allow multiple responses</label></div><div class="row"><label class="fleft">Maximum No. of responses:</label><i class="ucce ucce-minus"> </i> <span id="multiple-count-'+
b+'">'+f+'</span> <i class="ucce ucce-plus"> </i></div>');F="#question-"+b+" input, #question-"+b+" select";n="#question-"+b+" .ucce-delete";break;case "likert":t=n="";z=['<option value="1">Agreement (Disagree - Agree)</option>','<option value="2">Satisfaction (Smiley scale)</option>','<option value="3">Satisfaction (Dissatisfied - Satisfied)</option>','<option value="4">Pain scale (3 point)</option>'];if(k&&(n=p.name,(f=p.settings)&&f.hasOwnProperty("scale")&&(f=f.scale))){z[f-1]=z[f-1].replace('">',
'" selected>');D=A[f];t+="<ul>";f=0;for(m=D.length;f<m;f++)t+="<li>"+D[f]+"</li>";t+="</ul>"}f=z.join();t='<div class="media"><h2>Likert-scale</h2><div class="row"><label id="qlabel-'+b+'" class="fleft">Q'+x+'</label><input id="name-'+b+'"type="text" size=100 placeholder="type question" value="'+n+'"></div>'+e+y+('<div class="row"><h2>Answer</h2><label>Choices</label><select id="scale-'+b+'"><option value="">Please choose scale</option>'+f+'</select></div><div class="row">'+t+"</div>");F="#question-"+
b+" input, #question-"+b+" select";n="#question-"+b+" .ucce-delete";break;case "heatmap":n="",k&&(n=p.name),t='<div class="media"><h2>Heatmap</h2><div class="row"><label id="qlabel-'+b+'" class="fleft">Q'+x+'</label><input id="name-'+b+'"type="text" size=100 placeholder="type question" value="'+n+'"></div>'+e+('<div class="row"><h2>Image</h2><span id="preview-'+b+'" class="preview-empty fleft"></span><label for="image-'+b+'" class="button tiny fleft">Upload image</label><input id="image-'+b+'" name="file" type="file" accept="image/png, image/jpeg" class="show-for-sr"><h3>Number of clicks allowed:</h3><i class="ucce ucce-minus"> </i> 1 <i class="ucce ucce-plus"> </i><h3>Tap/click regions:</h3><a class="button tiny">Add region</a><input id="region-'+
d+'-1" type="text" placeholder="enter label" disabled></div>'),F="#question-"+b+" input",n="#question-"+b+" .ucce-delete"}r=r+t+"</div>";a("#survey-droppable-"+d).before(r);r=d+1;a("#survey-droppable-"+d).attr("id","survey-droppable-"+r);q[c]++;a("#section-break-"+B[c]+" > span").html("PAGE "+c+" ("+q[c]+" ELEMENTS)");var u=this.eventNamespace,w=this,L=function(){a(F).off("change"+u).on("change"+u,function(){if("instructions"==g){var c=parseInt(this.id.split("-")[1]);w.data.layout[c].do.text=a("#do-"+
c).val();w.data.layout[c].say.text=a("#say-"+c).val();w.save()}else w.saveQuestion(g,b)})};L();"instructions"!=g&&(k&&(d=p.file)&&l(S3.Ap.concat("/default/download/"+d),function(c){var d=l.scale(c,{canvas:!0,maxHeight:80,maxWidth:80});a("#preview-"+b).removeClass("preview-empty").empty().append(d);return c},{}),a("#image-delete-"+b).on("click"+u,function(){w.deleteImage(b)}),a("#image-"+b).fileupload({dataType:"json",dropZone:a("#preview-"+b+", #image-"+b),maxNumberOfFiles:1,url:S3.Ap.concat("/dc/question/")+
b+"/image_upload.json",add:function(c,d){if(c.isDefaultPrevented())return!1;(d.autoUpload||!1!==d.autoUpload&&a(this).fileupload("option","autoUpload"))&&d.process().done(function(){d.submit();l(d.files[0],function(c){var d=l.scale(c,{canvas:!0,maxHeight:80,maxWidth:80});a("#preview-"+b).removeClass("preview-empty").empty().append(d);d=p.type;if(13!=d){p.settings.hasOwnProperty(G)&&a("#pipe-"+b).val("").trigger("change");var f=!1;for(c in h)c.id==b&&(f=!0);f||(d="Q"+a("#question-"+b).data("number")+
" "+H[d],h.push({label:d,id:b}))}return c},{})})}}),a("#pipe-"+b).on("change"+u,function(){var c=a(this).val();val?(p.settings.pipeImage=h[c],w.deleteImage(b)):delete p.settings.pipeImage;w.saveQuestion(g,b)}));a(n).on("click"+u,function(){w.deleteQuestion(g,b)});switch(g){case "number":a("#answer-"+b).validate({rules:{min:{required:!1,digits:!0,lessThanMax:!0},max:{required:!1,digits:!0,greaterThanMin:!0}},messages:{min:{digits:"Only integers allowed"},max:{digits:"Only integers allowed"}},errorClass:"req",
focusCleanup:!0});break;case "multichoice":var E=a("#multiple-"+b),v=a("#multiple-count-"+b),M=function(){a(".choice-"+b).next().off("click"+u).on("click"+u,function(){if(1<a(".choice-"+b).length){a(this).parent().remove();var c=parseInt(v.html()),d=a(".choice-"+b).length;a("#other-"+b).prop("checked")&&d++;c>d&&(v.html(d),1==d&&E.prop("checked",!1));w.saveQuestion(g,b)}else a(this).prev().val("")});a(".choice-"+b).next().next().off("click"+u).on("click"+u,function(){a(this).parent().after(I);L();
M()});a("#other-"+b).on("change"+u,function(){if(a(this).prop("checked"))a("#other-label-"+b).prop("disabled",!1);else{a("#other-label-"+b).prop("disabled",!0);var c=parseInt(v.html()),d=a(".choice-"+b).length;c>d&&(v.html(d),1==d&&E.prop("checked",!1))}});E.on("change"+u,function(){if(E.prop("checked")){parseInt(v.html());var c=a(".choice-"+b).length;a("#other-"+b).prop("checked")&&c++;1<c?v.html(2):E.prop("checked",!1)}else v.html(1);w.saveQuestion(g,b)});v.prev().on("click"+u,function(){if(E.prop("checked")){var a=
parseInt(v.html());2<a?(v.html(a-1),w.saveQuestion(g,b)):2==a&&(v.html(1),E.prop("checked",!1),w.saveQuestion(g,b))}});v.next().on("click"+u,function(){if(E.prop("checked")){var c=parseInt(v.html()),d=a(".choice-"+b).length;a("#other-"+b).prop("checked")&&d++;c<d&&(v.html(c+1),w.saveQuestion(g,b))}})};M();break;case "likert":a("#scale-"+b).on("change"+u,function(){var b=a(this),c=b.val();if(c){c=A[c];for(var d="",f=0,g=c.length;f<g;f++)d+="<li>"+c[f]+"</li>";c="<ul>"+d+"</ul>";b.parent().next().empty().append(c)}else b.parent().next().empty()})}},
deleteQuestion:function(d,c){if("instructions"==d){var g=parseInt(a(this).closest(".dl-item").attr("id").split("-")[1]);var b=a("#instruction-"+g).data("page")}else g=a("#question-"+c).data("number"),g=C[g],b=a("#question-"+c).data("page");q[b]--;a("#section-break-"+B[b]+" > span").html("PAGE "+b+" ("+q[b]+" ELEMENTS)");b+=1;for(var k=Object.keys(B).length;b<=k;b++)B[b]--;k=this.data.layout;var f=Object.keys(k).length;for(b=g;b<f;b++){var m=b+1;var e=k[m];k[b]=e;if("question"==e.type){e=e.id;var h=
a("#question-"+e).data("number");"instructions"==d?C[h]=b:(m=h-1,a("#question-"+e).data("number",m),a("#qlabel-"+e).html("Q"+m),C[m]=b)}else"break"==e.type?a("#section-break-"+m).attr("id","section-break-"+b):(a("#instruction-"+m).attr("id","instruction-"+b),a("#do-"+m).attr("id","do-"+b),a("#say-"+m).attr("id","say-"+b))}delete k[f];"instructions"!=d&&delete C[h];this.save();"instructions"==d?a("#instruction-"+g).remove():a("#question-"+c).remove();a("#survey-droppable-"+(f+1)).attr("id","survey-droppable-"+
f);"instructions"!=d&&(d=S3.Ap.concat("/dc/question/")+c+"/delete.json",this.ajaxMethod({url:d,type:"POST",dataType:"json",success:function(){},error:function(a,b,c){console.log("UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText)}}))},deleteImage:function(d){var c=S3.Ap.concat("/dc/question/")+d+"/image_delete.json";this.ajaxMethod({url:c,type:"POST",dataType:"json",success:function(){a("#preview-"+d).empty().addClass("preview-empty");var c=h;h=[];for(var b=0,k=c.length;b<k;b++){var f=c[b];
f.id!=d&&h.push(f)}},error:function(a,b,c){console.log("UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText)}})},addSectionBreak:function(d,c,g){c++;B[c]=d;q[c]=0;var b='<div class="row"><div class="section-break medium-11 columns" id="section-break-'+d+'" data-page="'+c+'"><span>PAGE '+c+' (0 ELEMENTS)</span></div><div class="medium-1 columns">'+(d?'<i class="ucce ucce-delete-page"> </i>':"")+'<i class="ucce ucce-down-alt"> </i></div></div>';if(d){a("#survey-droppable-"+d).before(b);b=d+1;a("#survey-droppable-"+
d).data("page",c).attr("id","survey-droppable-"+b);g||(this.data.layout[d]={type:"break"},this.save());var k=this;c=this.eventNamespace;a("#section-break-"+d).next().children(".ucce-delete-page").on("click"+c,function(){var b=parseInt(a(this).parent().prev().attr("id").split("-")[2]);k.deleteSectionBreak(b)})}else a(this.element).parent().append(b)},deleteSectionBreak:function(d){var c=a("#section-break-"+d).data("page"),g=q[c];if(g){var b=c-1;q[b]+=g;a("#section-break-"+B[b]+" > span").html("PAGE "+
b+" ("+q[b]+" ELEMENTS)")}for(g=Object.keys(B).length;c<g;c++)B[c]=B[c+1]-1,q[c]=q[c+1];delete B[g];delete q[g];b=this.data.layout;var k=Object.keys(b).length;if(d!=k)for(c=d;c<k;c++){var f=c+1;var e=b[f];b[c]=e;"question"==e.type?(f=a("#question-"+e.id).data("number"),C[f]=c):"break"==e.type?(e=a("#section-break-"+f).data("page")-1,a("#section-break-"+f).data("page",e),a("#section-break-"+f+" > span").html("PAGE "+e+" ("+q[e]+" ELEMENTS)"),a("#section-break-"+f).attr("id","section-break-"+c)):(a("#instruction-"+
f).attr("id","instruction-"+c),a("#do-"+f).attr("id","do-"+c),a("#say-"+f).attr("id","say-"+c))}delete b[k];this.save();a("#section-break-"+d).parent().remove();a("#survey-droppable-"+(k+1)).data("page",g-1).attr("id","survey-droppable-"+k)},droppable:function(d,c){var g=this;c='<div class="survey-droppable" id="survey-droppable-'+d+'" data-page="'+c+'"><span>Drag and drop questions here</span></div>';a(this.element).parent().append(c);a("#survey-droppable-"+d).droppable({drop:function(b,c){b=c.draggable[0].id;
c=parseInt(this.id.split("-")[2]);var d=a(this).data("page");"break"==b?g.addSectionBreak(c,d):g.addQuestion(c,d,b)}})},_destroy:function(){a.Widget.prototype.destroy.call(this)},loadSurvey:function(){var a=this.data.layout;if(a){for(var c,g=1,b=0,e,f,m=this.data.questions,l=Object.keys(a).length,r=1;r<=l;r++)if(c=a[r],"break"!=c.type&&"instructions"!=c.type&&(b++,C[b]=r,c=c.id,e=m[c],e.file))if(13==e.type){f="Q"+b+" Heatmap; ";for(var p=e.settings.regions,q=0,y=p.length;q<y;q++)e=f+"'"+p[q].label+
"'",h.push({label:e,id:c,region:q})}else e="Q"+b+" "+H[e.type],h.push({label:e,id:c});for(r=1;r<=l;r++)c=a[r],"break"==c.type?(this.addSectionBreak(r,g,!0),g++):"instructions"==c.type?this.addQuestion(r,g,"instructions",!0):(c=c.id,this.addQuestion(r,g,H[m[c].type],c))}},refresh:function(){this._deserialize();this.addSectionBreak(0,0);this.droppable(1,1);this.loadSurvey()},saveQuestion:function(d,c){var g=a("#name-"+c).val();if(g){var b=S3.Ap.concat("/dc/question/")+c+"/update_json.json",e={};g={name:g,
mandatory:a("#mandatory-"+c).prop("checked")};var f=this.data[c].settings.pipeImage;f&&(e.pipeImage=f);switch(d){case "number":a("#min-"+c).hasClass("req")?d=null:(d=a("#min-"+c).val())&&(d=parseInt(d));a("#max-"+c).hasClass("req")?c=null:(c=a("#max-"+c).val())&&(c=parseInt(c));e.requires={isIntInRange:{min:d,max:c}};break;case "multichoice":var h=[];a(".choice-"+c).each(function(){h.push(a(this).val())});g.options=h;a("#other-"+c).prop("checked")?e.other=a("#other-label-"+c).val():e.other=null;a("#multiple-"+
c).prop("checked")?e.multiple=parseInt(a("#multiple-count-"+c).html()):e.multiple=1;break;case "likert":(c=a("#scale-"+c).val())?(g.options=A[c],e.scale=c):(g.options=[],e.scale=null)}g.settings=e;this.ajaxMethod({url:b,type:"POST",data:JSON.stringify(g),dataType:"json",success:function(){},error:function(a,b,c){console.log("UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText)}})}},save:function(){var a=S3.Ap.concat("/dc/template/")+this.recordID+"/update_json.json";this.ajaxMethod({url:a,type:"POST",
data:JSON.stringify({layout:this.data.layout}),dataType:"json",success:function(){},error:function(a,d,b){console.log("UNAUTHORIZED"==b?i18n.gis_requires_login:a.responseText)}})},_deserialize:function(){var d=a(this.element).val()||"{}";return this.data=JSON.parse(d)}})});
